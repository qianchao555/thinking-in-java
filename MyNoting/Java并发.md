## Java并发

1. 共享资源
   - 一般是以对象的形式存在的内存片段,亦可以是文件、输入/输出端口、打印机等
   - 要控制对共享资源的访问,得先把它包装进一个对象.然后把所有要访问这个资源的方法标记为Synchronized.
   - 每个访问临界资源的方法都必须同步,否则他们不会正确的工作
2. 原子性
   - 原子性就是指该操作是不可再分的。不论是多核还是单核，具有原子性的量，同一时刻只能有一个线程来对它进行操作。简而言之，在整个操作过程中不会被线程调度器中断的操作，都可认为是原子性。比如 a = 1.

3. 非原子性

   - 也就是整个过程中会出现线程调度器中断操作的现象,类似"a ++"这样的操作不具有原子性，因为它可能要经过以下两个步骤：
     + （1）取出 a 的值
     + （2）计算 a+1

   - 如果有两个线程t1，t2在进行这样的操作。t1在第一步做完之后还没来得及加1操作就被线程调度器中断了，于是t2开始执行，t2执行完毕后t1开始执行第二步(此时t1中a的值可能还是旧值，不是一定的，只有线程t2中a的值没有及时更新到t1中才会出现)。这个时候就出现了错误，t2的操作相当于被忽略了

   - 类似于a += 1这样的操作都不具有原子性。还有一种特殊情况，就是long跟double类型某些情况也不具有原子性

     

4. volatile

   - 在long,double前面加上volatile将使其具有原子性

   - 确保应用中的可视性

     - 讲一个域申明为volatile,那么只要对该域产生了写操作,那么所有的读操作都会看到这个修改.

     